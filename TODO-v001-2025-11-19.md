# 営業タスク管理システム - TODO一覧

**バージョン**: v001
**更新日**: 2025-11-19
**合計残作業時間**: 約12-15時間

---

## 🔴🔴🔴 最優先（緊急）

### 1. 本番環境ログイン問題の解決 **(1時間)**
- Netlifyデプロイ状況確認
- E2Eテスト再実行
- currentSession保存されない問題の調査

### 2. プロジェクトタスク作成モーダル統合 **(2時間)** ⚠️大きな山
- タスク作成モーダルに「+ 新規プロジェクト作成」追加
- プロジェクトタスク作成画面を廃止
- 通知・表示が正常に動作することを確認
- **場所**: `index-kanban.html:5100-5300`, `index-kanban.html:13200-13300`

### 3. パスワードハードコード問題の解決 **(検討中)**
- login.htmlからパスワードを削除するか判断

---

## 🔴 高優先度（大きな山）

### 4. LocalStorage完全脱却プロジェクト **(3-5時間)** ⚠️超大きな山

現在132箇所でLocalStorage使用中

| データ | Firebase | LocalStorage | 状態 |
|-------|----------|--------------|------|
| タスク | ✅ | ❌ | 完全移行済み |
| プロジェクト | ✅ | ❌ | 完全移行済み |
| ユーザー情報 | ✅ | ⚠️ キャッシュ | 移行済み |
| currentSession | ❌ | ✅ | **要移行** |
| taskTemplates | ❌ | ✅ | **要移行** |
| projectSettings | ❌ | ✅ | **要移行** |
| kanbanColumns | ❌ | ✅ | **要移行** |
| recurringTemplates | ❌ | ✅ | **要移行** |

---

## 🟡 中優先度（実装・調査タスク）

### 5. タスク移動パフォーマンス改善 **(1時間)**
- 症状: `[Violation] 'drop' handler took 2574ms`
- 対応: Firebase保存の非同期化、楽観的UI更新

### 6. systemUsersのname未定義問題 **(30分)**
- 一部ユーザーのnameがundefined

### 7. プロジェクト公開設定の実装 **(30分)**
- 機能の動作確認
- 実装方法の調査

### 8. 管理者ダッシュボードのアクセス権限拡大 **(20分)**
- 加藤・朝日（admin権限）にもダッシュボード表示

### 9. 期限切れタスク赤色表示修正 **(20分)**
- 期限切れタスクのカードが赤くならない問題

### 10. メイン画面の統計ロジック確認 **(30分)**
- 「要調整」の判定ロジック調査

### 11. マイページの個人詳細統計 **(1時間)**
- 機能していない
- 所要時間集計の実現可能性調査

### 12. ダッシュボード統計ロジック確認 **(30分)**
- 完了タスク判別方法
- カラム名変更時の挙動

### 13. ユーザー管理の非表示/無効化の違い説明 **(20分)**

---

## 🟢 低優先度（調査・意見提示）

### 14. シークレットタスク実現可能性 **(30分)**
- 非表示タスク機能は実装済み

### 15. 期限日・優先度の必要性 **(20分)**

### 16. テンプレートカテゴリ必要性確認 **(15分)**

---

## ⚪ 完了済み

- ✅ saveTasks データ消失バグ修正（コミット: 5f2f1dd）
- ✅ 非表示タスク機能実装
- ✅ モーダルスクロール位置リセット修正
- ✅ systemUsers初期化問題の根本解決
- ✅ Firebase認証時の日本語名取得修正
- ✅ E2Eテスト実装（Playwright）
- ✅ マイページ管理機能リンク削除
- ✅ パスワード変更機能確認
- ✅ 全データ削除機能の扱い提案（後回し決定）

---

## 📝 運用ルール

1. セッション終了時にこのファイルを更新
2. 大きな変更があった場合は新バージョン作成（例: `TODO-v002-2025-11-20.md`）
3. 「TODOを見せて」と言われたら、最も高いバージョン番号のファイルを読む

### ⚠️ デプロイフロー（重要）

**必ず以下の順序を守ること：**

1. **開発環境でテスト** - `npm run test:local` でローカルテスト実行
2. **ユーザーのGOを待つ** - 本番デプロイ前に必ず承認を得る
3. **本番環境にデプロイ** - `git push` でNetlifyに自動デプロイ

**禁止事項：**
- ユーザー確認なしに本番環境を変更しない
- 開発環境でテストせずに本番デプロイしない

---

## 📁 関連ファイル

- **本番URL**: https://stellar-biscochitos-e19cb4.netlify.app/sales-task-core/
- **メインコード**: `sales-task-core/index-kanban.html`
- **Firebase設定**: `sales-task-core/firebase-config-auth-fix-20250819-132508.js`
- **セッション履歴**: `SESSION.md`
- **要件定義**: `handover/requirements/2025-11-10-new-requirements.md`
