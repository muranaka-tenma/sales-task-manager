# 変更ログ: ゴミ箱 → アーカイブ リネーム

**日付**: 2025-12-08
**重要度**: 🟡 中（機能変更）
**ステータス**: ✅ 完了

---

## 変更内容

「ゴミ箱」カラムの名称を「アーカイブ」に変更

### 変更理由
- ユーザーが「ゴミ箱」というネーミングにピンと来ていない
- カラム名を自由に編集できるようにしたい

---

## 変更箇所

### index-kanban.html

| 行番号 | 変更内容 |
|--------|----------|
| 3402-3406 | `isTrashColumn()` - アーカイブ/archive パターン追加 |
| 3305 | デフォルトカラム定義 |
| 3313 | カラム自動追加時のタイトル |
| 3151, 4237, 4244, 6422, 6444, 14023 | プロジェクトデフォルトカラム |
| 13270 | `DEFAULT_PROJECT_COLUMNS` |
| 13276 | `isRequiredColumn()` - パターン追加 |
| 6169-6188 | ドラッグ時の確認メッセージ |
| 12647-12676 | 削除ボタンの確認メッセージ・通知 |
| 12679-12713 | cleanupTrash()のコメント・ログ |
| 8106-8108 | 通常タスクカラム削除アラート |
| 13321, 13379 | プロジェクトカラム削除アラート |
| 13442-13453 | プロジェクト作成時の自動追加 |

### pj-settings.html

| 行番号 | 変更内容 |
|--------|----------|
| 367 | `DEFAULT_COLUMNS` |
| 369-373 | `REQUIRED_COLUMNS` - パターンとデフォルト値 |
| 587 | カラム削除アラート |
| 631-642 | 保存時の自動追加コメント |

---

## パターンマッチ

変更後の`isTrashColumn()`と`isRequiredColumn()`は以下を認識：
- `ゴミ箱`
- `trash`
- `削除`
- `アーカイブ` ← 新規追加
- `archive` ← 新規追加

---

## 互換性

### 通常タスク
- 内部ID `trash` は**変更なし**
- LocalStorageに「ゴミ箱」が残っていても動作する
- 表示名のみ変更

### プロジェクトタスク
- Firebaseに保存された「ゴミ箱」カラムもパターンマッチで認識
- 新規プロジェクトは「アーカイブ」で作成

---

## LocalStorage脱却時の注意

### 障害にはならない理由
1. 通常タスクは`id: 'trash'`（固定）で管理、表示名は別
2. プロジェクトタスクは既にFirebase保存済み
3. パターンマッチで新旧両方の名称を認識

### 推奨対応
LocalStorage脱却時に以下のマイグレーション処理を追加すると良い：
```javascript
// kanbanColumns移行時にtitleを統一
if (column.id === 'trash' && column.title === 'ゴミ箱') {
    column.title = 'アーカイブ';
}
```

これにより既存ユーザーの表示も「アーカイブ」に統一される。

---

**変更者**: Claude Code
**変更日**: 2025-12-08
