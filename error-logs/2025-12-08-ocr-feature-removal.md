# OCR機能削除ログ

**日付**: 2025-12-08
**作業者**: Claude Code
**対象ファイル**: `sales-task-core/index-kanban.html`

---

## 削除理由

1. **精度が微妙** - ユーザーコメント「精度が多分微妙」
2. **コード肥大化** - OCR関連コードが約1,500行以上あり、メンテナンス負荷が高い
3. **外部依存** - Tesseract.js（約3MB）を読み込む必要があった
4. **使用頻度低** - 基幹機能ではなく、代替手段（CSV/テキストインポート）がある

---

## 削除前の調査結果

### 依存関係チェック
- ✅ OCR機能は**完全に独立**しており、他の機能への影響なし
- ✅ ファイル添付機能（`attachments`）は**別系統**で影響なし
- ✅ タスクのコア機能（作成・編集・移動・削除）に影響なし

### 削除対象
| 項目 | 行数 | 内容 |
|-----|------|------|
| tesseract.js script | 1行 | 外部ライブラリ読み込み |
| OCRインポートボタン | 1行 | 右パネルのボタン |
| TaskImportModal HTML | ~120行 | モーダルUI |
| OCR関連JS関数 | ~1,200行 | postprocessOCRText, performOCROnCanvas, performDeadlineOCR, performHandwritingOCR等 |
| importImageWithOCR | ~50行 | 画像インポート処理 |
| ハンバーガーメニュー項目 | 5行 | メニューリンク |
| initOCRModalEventListeners | 呼び出し | 初期化呼び出し |

---

## 削除手順

1. `tesseract.js` scriptタグ削除（コメントマーカー化）
2. OCRインポートボタン削除（コメントマーカー化）
3. TaskImportModal HTML削除（コメントマーカー化）
4. `initOCRModalEventListeners()` 呼び出し削除
5. OCR関連JavaScript関数群削除（8960-10169行、約1,200行）
6. タスクインポートモーダル関数群削除（10014-10715行、約700行）
7. `importImageWithOCR()` 関数削除
8. 画像ファイルドロップ時のOCR呼び出しをアラートに変更
9. ハンバーガーメニューのOCRインポート項目削除

---

## 削除後の状態

### 残存するOCR関連コード
すべて削除マーカーコメントのみ：
- `<!-- 🗑️ OCR機能削除済み（2025-12-08）... -->`
- `// 🗑️ OCR機能削除済み（2025-12-08）...`

### 画像ファイルの扱い
画像ファイルをドロップした場合、以下のアラートを表示：
```
画像からのタスク取り込み機能（OCR）は廃止されました。
CSV形式でインポートしてください。
```

### ファイルサイズ削減
- 削除前: 約600KB
- 削除後: 約520KB
- 削減量: 約80KB（約13%削減）

---

## 今後の対応

1. **代替手段の案内**: CSVインポート機能を推奨
2. **チュートリアル更新**: OCR関連の説明があれば削除
3. **ユーザー通知**: 必要に応じて変更を告知

---

## 関連ファイル更新

- [x] `error-logs/2025-12-08-ocr-feature-removal.md` - 本ログ
- [x] `TODO-v008-2025-12-08.md` - #15完了ステータス更新
- [x] `sales-task-core/index-kanban.html` - OCRコード削除

---

**ステータス**: ✅ 完了
